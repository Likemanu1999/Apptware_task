<!-- <h2> </h2>

<div class="animated fadeIn">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h2>Unsold-Summary</h2>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group ">

                                <label for="">Main Grade</label>

                                <ng-select id="id" placeholder="Select Main Grade" [searchable]="true"
                                    [clearable]="true" bindLabel="name" bindValue="id" [items]="main_grade"
                                    [multiple]=true [(ngModel)]="main_grade_ids" (clear)="onClear('main_grade_ids')">
                                </ng-select>

                                <button class="btn btn-primary mr-1" type="button" (click)="onSelectMainGrade()"
                                    style=" margin-top: 31px; ">
                                    <i class="fa fa-search"></i> Search</button>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> -->


<div class="animated fadeIn">
    <div class="row">
        <div class="col-md-12 p-0">
            <div class="card">
                <div class="card-header">
                    <h2> Unsold-Summary</h2>
                </div>
                <div class="card-body overflow-auto">
                    <div class="row mb-1">
                        <div class="col-md-1">

                            <label for=""><b>Division</b></label>
                        </div>
                        <div class="col-md-2">
                            <ng-select id="id" placeholder="Select Company" [searchable]="true" [clearable]="true"
                                bindLabel="name" bindValue="id" [items]="company_List" [multiple]=true
                                [(ngModel)]="company_Ids" appendTo="body" (change)="onCompanyChange($event)">
                            </ng-select>
                        </div>

                        <div class="col-md-1">

                            <label for=""><b>Main Grade</b></label>
                        </div>
                        <div class="col-md-2">
                            <ng-select id="id" placeholder="Select Main Grade" [searchable]="true" [clearable]="true"
                                bindLabel="name" bindValue="id" [items]="main_grade" [multiple]=true
                                [(ngModel)]="main_grade_ids" appendTo="body">
                            </ng-select>
                        </div>

                        <div class="col-md-2">
                            <button class="btn btn-dark mr-1" type="button" (click)="onSelectMainGrade()">
                                <i class="fa fa-search"></i> Search</button>
                        </div>
                        <div class="col-md-2">
                            <div class="btn btn-dark" (click)="downloadImage()"><i class="fa fa-download"
                                    aria-hidden="true"> Unsold</i></div>
                        </div>
                        <div class="col-md-2">
                            <div class="btn btn-dark" (click)="downloadImageDet()">
                                <i class="fa fa-download" aria-hidden="true"> Detail Grade Unsold</i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="col-md-2 offset-5" *ngIf="isLoading_unsold">
    <app-loading-spinner></app-loading-spinner>
</div>


<!-- <div *ngIf='detailView_unsold' #screen id="table" style="overflow: scroll;">
    <h4>Unsold Summary As on {{todayDate | date: 'EEEE, MMMM d, y'}}</h4>

    <table class="table table-striped table-dark">
        <thead>
            <tr>
                <th scope="col">Port</th>
                <th scope="col">LC not Issue</th>
                <th scope="col">Non Docs Pending</th>
                <th scope="col">Material Under Clearance</th>
                <th scope="col">Material In Bond</th>
                <th scope="col">Stock Trasfer Intransite</th>
                <th scope="col">Local Purchase In Transite</th>
                <th scope="col">Godown Inventory</th>
                <th scope="col">Total Quantity</th>
                <th scope="col">Order Pending</th>
                <th scope="col">Import Order Pending</th>
                <th scope="col">Total Unsold</th>
            </tr>
            <tr>
                <th scope="col">High Seas / LC To be Given</th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col" data-toggle="tooltip"
                    title="High Seas PI Received and  Payment LC/NONLC Confirmed but Non Not Received"><span
                        *ngIf="data">(HighSeas : {{data.total_high_seas_pending | number : '1.0-3'}} )</span></th>
                <th scope="col" data-toggle="tooltip"
                    title="Transnational PI Received and  Payment LC/NONLC Confirmed but Non Not Received"><span
                        *ngIf="data">(Transnational : {{data.total_transnational_pending | number : '1.0-3'}} )</span>
                </th>

                <th scope="col" data-toggle="tooltip"
                    title="Forward PI Received and  Payment LC/NONLC Confirmed but Non Not Received"><span
                        *ngIf="data">(Forward : {{data.total_forward_pending | number : '1.0-3'}} )</span> </th>

                <th scope="col"><span *ngIf="data">PI To be Call From Supplier: {{data.lc_to_be_given | number :
                        '1.0-3'}}</span> </th>

            </tr>
        </thead>
        <tbody *ngIf="data">

            <tr *ngFor="let item of data.port_wise_details">
                <th scope="row"> <span (click)="getDetailUnsold(item.main_godown_id, item.port)"
                        style="cursor: pointer;">{{
                        item.port}}</span></th>

                <td scope="row">
                    <span *ngIf="item.lc_not_issue">
                        {{ item.lc_not_issue | number : '1.0-3'}}
                    </span>
                </td>

                <td scope="row">
                    <span *ngIf="item.non_pending">
                        {{ item.non_pending | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    <span *ngIf="item.reg_arrival">
                        {{ item.reg_arrival | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    <span *ngIf="item.bond_arrival">
                        {{ item.bond_arrival | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    <span *ngIf="item.stock_transfer_intransite">
                        {{ item.stock_transfer_intransite | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    <span *ngIf="item.local_purchase">
                        {{ item.local_purchase | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    <span *ngIf="item.godwon_stock">
                        {{ item.godwon_stock | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    {{ (item.lc_not_issue + item.non_pending + item.reg_arrival + item.bond_arrival
                    +item.stock_transfer_intransite
                    +item.local_purchase
                    +item.godwon_stock ) | number : '1.0-3' }}
                </td>
                <td scope="row">
                    <span *ngIf="item.sales_pending">
                        {{ item.sales_pending | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    <span *ngIf="item.sales_pending">
                        {{ item.forward_sales_pending | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    {{ ((item.lc_not_issue + item.non_pending + item.reg_arrival + item.bond_arrival
                    +item.stock_transfer_intransite
                    +item.local_purchase
                    +item.godwon_stock ) - (item.sales_pending + item.forward_sales_pending)) | number : '1.0-3'}}
                </td>
            </tr>







            <tr>
                <th></th>
                <th>{{ all_godown_lc_not_issue | number : '1.0-3'}}</th>
                <th>{{ all_godown_non_pending | number : '1.0-3'}}</th>
                <th>{{ all_godown_reg_arrival | number : '1.0-3'}}</th>
                <th>{{ all_godown_bond_arrival | number : '1.0-3'}}</th>
                <th>{{ all_godown_stock_transfer_intransite | number : '1.0-3'}}</th>
                <th>{{ all_godown_local_purchase | number : '1.0-3'}}</th>
                <th>{{ all_godown_godwon_stock | number : '1.0-3'}}</th>
                <th>{{
                    (all_godown_lc_not_issue +
                    all_godown_non_pending+all_godown_reg_arrival+all_godown_bond_arrival+all_godown_stock_transfer_intransite+all_godown_local_purchase+all_godown_godwon_stock)
                    | number : '1.0-3' }}</th>
                <th>{{all_godown_sales_pending | number : '1.0-3' }}</th>
                <th>{{all_godown_forward_sales_pending | number : '1.0-3' }}</th>
                <th>{{ (data.lc_to_be_given +
                    (all_godown_lc_not_issue +
                    all_godown_non_pending+all_godown_reg_arrival+all_godown_bond_arrival+all_godown_stock_transfer_intransite+all_godown_local_purchase+all_godown_godwon_stock)
                    - all_godown_sales_pending  - all_godown_forward_sales_pending) | number : '1.0-3' }}</th>
            </tr>

            <tr>
                <th colspan='8'></th>
                <th>Total Unsold </th>
                <th> <span *ngIf="data">{{data.totalUnsold | number : '1.0-3'}}</span></th>
            </tr>
        </tbody>
    </table>
</div> -->

<!-- Ejaz -->
<div class="animated fadeIn">
    <div class="row">
        <div class="col-md-12 p-0">
            <div class="card">
                <!-- <div class="card-header">
                    <h4>Unsold Summary As on {{todayDate | date: 'EEEE, MMMM d, y'}}</h4>
                </div> -->
                <div class="card-body overflow-auto">
                    <div class="row" *ngIf="isLoading">
                        <div class="col-md-12">
                            <div style="text-align: center;">
                                <app-loading-spinner></app-loading-spinner>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <p-table #dt [value]="testData" dataKey="id" styleClass="ui-table-cons" [rowHover]="true"
                                [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]"
                                [loading]="isLoading" [paginator]="false" [columns]="cols" [scrollable]="false"
                                scrollHeight="400px"
                                currentPageReportTemplate="Showing &#123;currentPage&#125;   of &#123;totalPages&#125; entries"
                                [filterDelay]="0" [globalFilterFields]="['port']">

                                <ng-template pTemplate="caption">
                                    <div class="captionTopDiv">
                                        <div class="ui-table-globalfilter-container">
                                            <input pInputText type="text" class="form-control"
                                                (input)="dt.filterGlobal($event.target.value, 'contains')"
                                                placeholder="Global Search" />
                                        </div>
                                        <div class="ui-helper-clearfix" style="text-align: left;">
                                            <!-- <div class="card-header"> -->
                                            <h4 style="margin-right: 0.5em; font-weight: bold;">Unsold Summary As on
                                                {{todayDate | date: 'EEEE, MMMM d, y'}}</h4>
                                            <!-- </div> -->
                                        </div>
                                    </div>
                                </ng-template>

                                <ng-template pTemplate="header" let-columns>
                                    <tr>
                                        <th pSortableColumn="{{col.field}}" *ngFor="let col of cols"
                                            [style.width]="col.style">
                                            {{col.header}} <p-sortIcon field="{{col.field}}"></p-sortIcon>
                                        </th>
                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="body" let-item>
                                    <tr class="ui-selectable-row">
                                        <td [style.font-weight]="item.pnforRegular === 0 ? '00': 'bold'"
                                            style="width:100px;"
                                            (click)="getDetailUnsold(item.main_godown_id, item.port)">
                                            <span class="ui-column-title">Godown </span>
                                            {{item.port}}
                                        </td>

                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Port For Regular </span>
                                            {{item.pnforRegular === 0 ? null : item.pnforRegular | number : '1.0-3'}}
                                        </td>

                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Port For In Port </span>
                                            {{item.pnforInport === 0 ? null : item.pnforInport | number : '1.0-3'}}
                                        </td>

                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">LC not Issue </span>
                                            {{item.lc_not_issue === 0 ? null : item.lc_not_issue | number : '1.0-3'}}
                                        </td>

                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Non Docs Pending</span>
                                            {{item.non_pending === 0 ? null : item.non_pending | number : '1.0-3'}}
                                        </td>

                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Material Under Clearance </span>
                                            {{ item.reg_arrival === 0 ? null : item.reg_arrival | number : '1.0-3'}}

                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Material In Bond</span>
                                            {{ item.bond_arrival === 0 ? null : item.bond_arrival | number : '1.0-3'}}
                                        </td>

                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Stock Transfer Intransite</span>
                                            {{item.stock_transfer_intransite === 0 ? null :
                                            item.stock_transfer_intransite | number
                                            : '1.0-3'}}
                                        </td>
                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Purchase In Transit</span>
                                            {{item.local_purchase === 0 ? null : item.local_purchase | number :
                                            '1.0-3'}}

                                        </td>
                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Godown Stock</span>
                                            {{item.godwon_stock === 0 ? null : item.godwon_stock | number : '1.0-3'}}
                                        </td>
                                        <td style="width:90px; font-weight: bold;">
                                            <span class="ui-column-title">Total Quantity</span>
                                            <!-- {{ (item.lc_not_issue + item.non_pending + item.reg_arrival +
                                            item.bond_arrival
                                            +item.stock_transfer_intransite
                                            +item.local_purchase
                                            +item.godwon_stock ) | number : '1.0-3' }} -->
                                            {{item.totalQuantity | number : '1.0-3'}}

                                        </td>
                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Order Pending</span>
                                            {{item.sales_pending === 0 ? null : item.sales_pending | number : '1.0-3'}}
                                        </td>
                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title">Import Order Pending</span>
                                            {{item.forward_sales_pending === 0 ? null : item.forward_sales_pending |
                                            number :
                                            '1.0-3'}}
                                        </td>
                                        <td style="width:90px; font-weight: bold;">
                                            <span class="ui-column-title">Total Unsold</span>
                                            <!-- {{ ((item.lc_not_issue + item.non_pending + item.reg_arrival +
                                            item.bond_arrival
                                            +item.stock_transfer_intransite
                                            +item.local_purchase
                                            +item.godwon_stock ) - (item.sales_pending + item.forward_sales_pending)) |
                                            number :
                                            '1.0-3'}} -->
                                            {{ item.totalUnsold | number : '1.0-3' }}
                                        </td>

                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="footer">
                                    <tr>
                                        <td style="width:100px;"></td>
                                        <td class="rowsWidthStyle"></td>
                                        <td class="rowsWidthStyle"></td>
                                        <td class="rowsWidthStyle">
                                            <span class="ui-column-title-footer">LC not Issue </span>
                                            {{ all_godown_lc_not_issue | number : '1.0-3'}}
                                        </td>
                                        <td class="rowsWidthStyle">{{ all_godown_non_pending | number : '1.0-3'}}</td>
                                        <td class="rowsWidthStyle">{{ all_godown_reg_arrival | number : '1.0-3'}}</td>
                                        <td class="rowsWidthStyle">{{ all_godown_bond_arrival | number : '1.0-3'}}</td>
                                        <td class="rowsWidthStyle">{{ all_godown_stock_transfer_intransite | number :
                                            '1.0-3'}}</td>
                                        <td class="rowsWidthStyle">{{ all_godown_local_purchase | number : '1.0-3'}}
                                        </td>
                                        <td class="rowsWidthStyle">{{ all_godown_godwon_stock | number : '1.0-3'}}</td>
                                        <td class="rowsWidthStyle">{{
                                            (all_godown_lc_not_issue + pi_Regular_Import_Sum +
                                            all_godown_non_pending+all_godown_reg_arrival+all_godown_bond_arrival+all_godown_stock_transfer_intransite+all_godown_local_purchase+all_godown_godwon_stock)
                                            | number : '1.0-3' }}
                                        </td>
                                        <td class="rowsWidthStyle">{{all_godown_sales_pending | number : '1.0-3' }}</td>
                                        <td class="rowsWidthStyle">{{all_godown_forward_sales_pending | number : '1.0-3'
                                            }}</td>
                                        <td class="rowsWidthStyle">
                                            {{data.totalUnsold | number : '1.0-3'}}
                                            <!-- {{ (data.lc_to_be_given + data.total_forward_pending +
                                            (all_godown_lc_not_issue +
                                            all_godown_non_pending+all_godown_reg_arrival+all_godown_bond_arrival+all_godown_stock_transfer_intransite+all_godown_local_purchase+all_godown_godwon_stock)
                                            - all_godown_sales_pending - all_godown_forward_sales_pending) | number :
                                            '1.0-3' }} -->
                                        </td>
                                    </tr>
                                    <!-- <tr>
                                        <td colspan='10' class="rowsWidthStyle"></td>
                                        <td class="rowsWidthStyle">Total Unsold </td>
                                        <td class="rowsWidthStyle"> <span *ngIf="data">{{data.totalUnsold | number :
                                                '1.0-3'}}</span></td>
                                    </tr> -->
                                </ng-template>

                                <ng-template pTemplate="emptymessage">
                                    <tr>
                                        <td colspan="14" class="text-center">No Data found.</td>
                                    </tr>
                                </ng-template>

                            </p-table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="download">
    <img #canvas>
    <a #downloadLink></a>
</div>


<!-- <div class="col-md-2 offset-5" *ngIf="isLoading">
    <app-loading-spinner></app-loading-spinner>
</div> -->





<!-- <h2 *ngIf="detailView">Grade Wise Detail Unsold for {{port_name}}</h2>
<div *ngIf="detailView" class="table-responsive">
    <table #screenDet id="table" class="table table-hover table-striped table-dark">
        <thead>
            <tr>
                <th scope="col">Grade</th>
                <th scope="col">Main Grade</th>
                <th scope="col">LC Not Issue</th>
                <th scope="col">Non Docs Pending</th>
                <th scope="col">Material Under Clearance</th>
                <th scope="col">Material In Bond</th>
                <th scope="col">Stock Transfer Intransite</th>
                <th scope="col">Local Purchase In Transite</th>
                <th scope="col">Godown Inventory</th>
                <th scope="col">Total Quantity</th>
                <th scope="col">Order Pending</th>
                <th scope="col">Total Unsold</th> -->
<!-- <th scope="col">Update Hold</th>
                <th scope="col">Hold Quantity</th>
                <th scope="col">Remain Quantity</th> -->
<!-- </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of Detaildata">
                <th scope="row">
                    <span *ngIf="item[0]">
                        {{ item[0]}}
                    </span>
                </th>
                <th scope="row">
                    <span *ngIf="item[0]">
                        {{item[4]}}
                    </span>
                </th>
                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.lc_not_issue">
                            {{det.lc_not_issue | number : '1.0-3' }}
                        </span>
                    </span>
                </td>

                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.nonpending">
                            {{det.nonpending | number : '1.0-3' }}
                        </span>
                    </span>
                </td>
                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.reg_intransit">
                            {{det.reg_intransit | number : '1.0-3' }}
                        </span>
                    </span>
                </td>
                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.bond_intransit">
                            {{det.bond_intransit | number : '1.0-3'}}
                        </span>
                    </span>
                </td>
                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.stock_transfer_intransite">
                            {{det.stock_transfer_intransite | number : '1.0-3'}}
                        </span>
                    </span>
                </td>
                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.local_intransit">
                            {{det.local_intransit | number : '1.0-3'}}
                        </span>
                    </span>
                </td>
                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span (click)="getDetailGrade(det.grade_id,item[0])" style="cursor: pointer;"
                            *ngIf="det.inventory">
                            {{det.inventory | number : '1.0-3'}}
                        </span>
                    </span>
                </td>
                <td scope="row">
                    <span *ngIf="item[2]">
                        {{ item[2] | number : '1.0-3'}}
                    </span>
                </td>
                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.sales_pending">
                            {{det.sales_pending | number : '1.0-3'}}
                        </span>
                    </span>
                </td>
                <td scope="row">
                    <span *ngIf="item[3]">
                        {{ (item[3] ) | number : '1.0-3'}}
                    </span>
                </td> -->
<!-- <td scope="row">
                        <span (click)="holdQtyUpdate(item[1][0].grade_id , port_name)" style="cursor: pointer;"><button
                                class="btn btn-dark">Hold</button>
                        </span>
                </td>
                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.hold_qty">
                            {{det.hold_qty | number : '1.0-3'}}
                        </span>
                    </span>
                </td>

                <td scope="row">
                    <span *ngFor="let det of item[1]">
                        <span *ngIf="det.hold_qty">
                            {{  (item[2] - det.hold_qty) | number : '1.0-3'}}
                        </span>
                    </span>
                </td> -->
<!-- </tr>










            <tr>
                <th></th>
                <th></th>
                <th>{{one_godown_all_grade_lc_not_issue | number : '1.0-3'}}</th>
                <th>{{one_godown_all_grade_non_pending | number : '1.0-3'}}</th>
                <th>{{one_godown_all_grade_reg_arrival | number : '1.0-3' }}</th>
                <th>{{one_godown_all_grade_bond_arrival | number : '1.0-3' }}</th>
                <th>{{one_godown_all_grade_stock_transfer_intransite | number : '1.0-3' }}</th>
                <th>{{one_godown_all_grade_local_purchase | number : '1.0-3' }}</th>
                <th>{{one_godown_all_grade_godwon_stock | number : '1.0-3' }}</th>
                <th>{{(one_godown_all_grade_lc_not_issue + one_godown_all_grade_non_pending +
                    one_godown_all_grade_reg_arrival+
                    one_godown_all_grade_bond_arrival+ one_godown_all_grade_stock_transfer_intransite+
                    one_godown_all_grade_local_purchase+ one_godown_all_grade_godwon_stock ) | number : '1.0-3' }}</th>
                <th>{{one_godown_all_grade_sales_pending | number : '1.0-3' }}</th>
                <th>{{ ((one_godown_all_grade_lc_not_issue + one_godown_all_grade_non_pending +
                    one_godown_all_grade_reg_arrival+
                    one_godown_all_grade_bond_arrival+ one_godown_all_grade_stock_transfer_intransite+
                    one_godown_all_grade_local_purchase+ one_godown_all_grade_godwon_stock ) -
                    one_godown_all_grade_sales_pending ) | number : '1.0-3' }}</th>

            </tr>

        </tbody>
    </table>
</div> -->

<div id="downloadDet">
    <img #canvasDet>
    <a #downloadLinkDet></a>
</div>


<div bsModal #myModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true" [config]="{backdrop:'static'}">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:#232B2B;">


            <div class="modal-header">
                <h4 class="modal-title" style="color:white;">Godown Wise Stock for Grade - {{grade_name_model}}</h4>
                <button type="button" class="close" (click)="closeModal()" aria-label="Close"
                    style="background-color:white;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <table class="table table-hover table-striped table-dark"
                            style="background-color:#191C20; font: size 15px;">
                            <tr>
                                <th><b>Godown Name</b></th>
                                <th><b>Quantity</b></th>
                            </tr>
                            <tr *ngFor="let grd_item of gradeDetails">
                                <td>{{grd_item.godown_name}}</td>
                                <td>{{grd_item.inventory | number : '1.0-3'}}</td>
                            </tr>
                            <tr>
                                <td><b>Total</b></td>
                                <td><b>{{gradeDetails | totalsum : 'inventory' | number : '1.0-3'}}</b></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div bsModal #myHoldModel="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true" [config]="{backdrop:'static'}">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:#232B2B;">


            <div class="modal-header">
                <h4 class="modal-title" style="color:white;">Hold Quantity</h4>
                <button type="button" class="close" (click)="closeModal()" aria-label="Close"
                    style="background-color:white;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div class="col-md-12">
                    <div class="row">
                        <div class="form-group row">
                            <label class="col-md-6 col-form-label" style="color:white"><strong>Hold Qty</strong></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" id="hold_qty" [(ngModel)]="hold_qty"
                                    placeholder="Enter Hold Qty">
                            </div>

                        </div>
                        <div class="col-md-6">
                            <button type="submit" class="btn btn-dark" (click)="submitHold()">Submit</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div bsModal #unsoldSummaryList="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true" [config]="{backdrop:'static'}">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content width-fit-content">


            <!-- <div class="modal-header">
                <h4 *ngIf="detailView">Grade Wise Detail Unsold for {{port_name}}</h4>

                <button type="button" class="close" (click)="closeModalForm()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div> -->

            <div class="modal-body">
                <div class="animated fadeIn">
                    <div class="row">
                        <div class="col-md-12 p-0">
                            <!-- <div class="card-header">
                                    <h4>Unsold Summary As on {{todayDate | date: 'EEEE, MMMM d, y'}}</h4>
                                </div> -->
                            <div class="row" *ngIf="isLoading">
                                <div class="col-md-12">
                                    <div style="text-align: center;">
                                        <app-loading-spinner></app-loading-spinner>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <p-table #dt1 [value]="Detaildata" dataKey="id" styleClass="ui-table-cons"
                                        [rowHover]="true" [rows]="10" [showCurrentPageReport]="true"
                                        [rowsPerPageOptions]="[10,25,50]" [loading]="isLoading" [paginator]="false"
                                        [columns]="popCols"
                                        currentPageReportTemplate="Showing &#123;currentPage&#125;   of &#123;totalPages&#125; entries"
                                        [filterDelay]="0" [globalFilterFields]="['grade_name']">

                                        <ng-template pTemplate="caption">
                                            <div class="captionTopDiv2">
                                                <div>
                                                    <!-- <div class="card-header"> -->
                                                    <h4 style="margin-right: 0.5em; font-weight: bold;">Grade Wise
                                                        Detail Unsold for {{port_name}}</h4>
                                                    <!-- </div> -->
                                                </div>
                                                <div>
                                                    <input pInputText type="text" class="form-control"
                                                        (input)="dt1.filterGlobal($event.target.value, 'contains')"
                                                        placeholder="Global Search" />
                                                </div>
                                                <div>
                                                    <button type="button" class="close1" (click)="closeModalForm()"
                                                        aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </ng-template>

                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                <th *ngFor="let col of popCols" [style.width]="col.style">
                                                    {{col.header}}
                                                </th>
                                            </tr>
                                        </ng-template>

                                        <ng-template pTemplate="body" let-item>
                                            <tr class="ui-selectable-row">
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Grade</span>
                                                    {{ item.grade_name }}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span>
                                                        <span class="ui-column-title">Main Grade</span>
                                                        {{item.mainGrade }}
                                                    </span>
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">LC Not Issue</span>
                                                    {{item.lc_not_issue | number : '1.0-3' }}
                                                </td>

                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Non Docs Pending</span>
                                                    {{item.nonpending | number : '1.0-3' }}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Material Under Clearance</span>
                                                    {{item.reg_intransit | number : '1.0-3' }}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Material In Bond</span>
                                                    {{item.bond_intransit | number : '1.0-3'}}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Stock Transfer Intransit</span>
                                                    {{item.stock_transfer_intransite | number : '1.0-3'}}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <!-- <span *ngFor="let det of item[1]"> -->
                                                        <span class="ui-column-title">Local Purchase In Transit</span>
                                                        {{item.local_intransit | number : '1.0-3'}}
                                                    <!-- </span> -->
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Godown Inventory</span>
                                                    {{item.inventory | number : '1.0-3'}}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Total Quantity</span>
                                                    {{ item.totalInhand | number : '1.0-3'}}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Order Pending</span>
                                                    {{item.sales_pending | number : '1.0-3'}}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Import Order Pending</span>
                                                    {{item.total_forward_sales_pending | number : '1.0-3'}}
                                                </td>
                                                <td class="rowsWidthStyle">
                                                    <span class="ui-column-title">Total Unsold</span>
                                                    {{ (item.inhandSaleDiff ) | number : '1.0-3'}}
                                                </td>
                                            </tr>
                                        </ng-template>

                                        <ng-template pTemplate="footer">
                                            <tr>
                                                <td class="rowsWidthStyle"></td>
                                                <td class="rowsWidthStyle"></td>
                                                <td class="rowsWidthStyle">{{one_godown_all_grade_lc_not_issue === 0 ?
                                                    null :
                                                    one_godown_all_grade_lc_not_issue | number : '1.0-3'}}</td>
                                                <td class="rowsWidthStyle">{{one_godown_all_grade_non_pending === 0 ?
                                                    null :
                                                    one_godown_all_grade_non_pending | number : '1.0-3'}}</td>
                                                <td class="rowsWidthStyle">{{one_godown_all_grade_non_pending === 0 ?
                                                    null :
                                                    one_godown_all_grade_reg_arrival | number : '1.0-3' }}</td>
                                                <td class="rowsWidthStyle">{{one_godown_all_grade_bond_arrival === 0 ?
                                                    null :
                                                    one_godown_all_grade_bond_arrival | number : '1.0-3' }}</td>
                                                <td class="rowsWidthStyle">
                                                    {{one_godown_all_grade_stock_transfer_intransite === 0 ? null :
                                                    one_godown_all_grade_stock_transfer_intransite | number : '1.0-3'
                                                    }}</td>
                                                <td class="rowsWidthStyle">{{one_godown_all_grade_local_purchase === 0 ?
                                                    null :
                                                    one_godown_all_grade_local_purchase | number : '1.0-3' }}</td>
                                                <td class="rowsWidthStyle">{{one_godown_all_grade_godwon_stock === 0 ?
                                                    null :
                                                    one_godown_all_grade_godwon_stock | number : '1.0-3' }}</td>
                                                <td class="rowsWidthStyle">{{(one_godown_all_grade_lc_not_issue +
                                                    one_godown_all_grade_non_pending +
                                                    one_godown_all_grade_reg_arrival+
                                                    one_godown_all_grade_bond_arrival+
                                                    one_godown_all_grade_stock_transfer_intransite+
                                                    one_godown_all_grade_local_purchase+
                                                    one_godown_all_grade_godwon_stock ) === 0 ? null :
                                                    (one_godown_all_grade_lc_not_issue +
                                                    one_godown_all_grade_non_pending +
                                                    one_godown_all_grade_reg_arrival+
                                                    one_godown_all_grade_bond_arrival+
                                                    one_godown_all_grade_stock_transfer_intransite+
                                                    one_godown_all_grade_local_purchase+
                                                    one_godown_all_grade_godwon_stock ) | number : '1.0-3' }}
                                                </td>
                                                <td class="rowsWidthStyle">{{one_godown_all_grade_sales_pending === 0 ?
                                                    null :
                                                    one_godown_all_grade_sales_pending | number : '1.0-3' }}
                                                </td>
                                                <td class="rowsWidthStyle">{{one_godown_all_grade_forward_sales_pending
                                                    === 0 ? null :
                                                    one_godown_all_grade_forward_sales_pending | number : '1.0-3' }}
                                                </td>
                                                <td class="rowsWidthStyle">{{ ((one_godown_all_grade_lc_not_issue +
                                                    one_godown_all_grade_non_pending +
                                                    one_godown_all_grade_reg_arrival+
                                                    one_godown_all_grade_bond_arrival+
                                                    one_godown_all_grade_stock_transfer_intransite+
                                                    one_godown_all_grade_local_purchase+
                                                    one_godown_all_grade_godwon_stock ) -
                                                    (one_godown_all_grade_sales_pending + one_godown_all_grade_forward_sales_pending) ) === 0 ? null :
                                                    ((one_godown_all_grade_lc_not_issue +
                                                    one_godown_all_grade_non_pending +
                                                    one_godown_all_grade_reg_arrival+
                                                    one_godown_all_grade_bond_arrival+
                                                    one_godown_all_grade_stock_transfer_intransite+
                                                    one_godown_all_grade_local_purchase+
                                                    one_godown_all_grade_godwon_stock ) -
                                                    (one_godown_all_grade_sales_pending + one_godown_all_grade_forward_sales_pending) ) | number : '1.0-3' }}
                                                </td>

                                            </tr>
                                        </ng-template>

                                        <ng-template pTemplate="emptymessage">
                                            <tr>
                                                <td colspan="12" class="text-center">No Data found.</td>
                                            </tr>
                                        </ng-template>

                                    </p-table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="closeModalForm()">Close</button>
            </div>
        </div>
    </div>
</div>



<toaster-container [toasterconfig]="toasterconfig"></toaster-container>